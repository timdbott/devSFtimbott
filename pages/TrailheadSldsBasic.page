<apex:page showHeader="false" standardStylesheets="false" sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0"> 
    
    <!--   enable support for the SVG icon sprite maps within Visualforce  -->
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
    <head>
        <title>Salesforce Lightning Design System Trailhead Module</title>
    	<apex:stylesheet value="{!URLFOR($Resource.SLDS0110, 'assets/styles/salesforce-lightning-design-system-vf.css')}"/>
    </head>

	<apex:remoteObjects >
        <apex:remoteObjectModel name="Account" fields="Id,Name,LastModifiedDate"/>
	</apex:remoteObjects>
        
    <body>
        <!-- required slds wrapper -->
        <div class="slds">
            <!-- masthead -->
            <p class="slds-text-heading--label slds-m-bottom--small">
                Salesforce Lighting Design System Trailhead Module
            </p>
            <!-- / masthead -->
            

            <!-- page header -->
            <div class="slds-page-header" role="banner">
                
                <!-- layout grid -->
                <div class="slds-grid">
                    
                    <!-- grid column -->
                    <div class="slds-col">
                        <div class="slds-media">
                            <div class="slds-media__figure">
                                <span class="slds-icon__container slds-icon-standard-account">
                                    <svg aria-hidden="true" class="slds-icon">
                                        <use xlink:href="{!URLFOR($Resource.SLDS0110, 'assets/icons/standard-sprite/svg/symbols.svg#account')}"></use>
                                    </svg>
                                    <span class="slds-assistive-text">Account Icon</span>
                                </span>
                            </div>
                            <div class="slds-media__body">
                                <!-- heading -->
                                <p class="slds-text-heading--label">Accounts</p>
                                <h1 class="slds-text-heading--medium">My Accounts</h1>
                                <!-- / heading -->
                            </div>
						</div>
                    </div>
                    
                    <!-- grid column -->
                    <div class="slds-col slds-no-flex slds-align-middle">
                        <div class="slds-button-group" role="group">
                            <button class="slds-button slds-button--neutral">
                                New Account
                            </button>
                            <button class="slds-button slds-button--neutral">
                                More
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- primary content wrapper -->
            <div class="myapp">
				
                <!-- create new account -->
                <div aria-labelledby="newaccountform">
                    
                    <!-- boxed area -->
                    <fieldset class="slds-box slds-theme--default slds-container--small">
                        <legend id="newaccountform" class="slds-text-heading--medium slds-p-vertical--medium">
                            add a new account
                        </legend>
                        
                        <!-- create new account form -->
                        <form class="slds-form--stacked">
                            <div class="slds-form-element">
                                <label class="slds-form-element__label" for="accountName">Name</label>
                                <div class="slds-form-element__control">
                                    <input id="accountName" class="slds-input" type="text" placeholder="new account"/>
                                </div>
                            </div>
                            <button class="slds-button slds-button--brand slds-m-top--medium" type="button" onClick="createAccount()">
                            	create account
                            </button>
                        </form>
                    </fieldset>
                </div>
                
                <!-- account list table -->
                <div id="accountList" class="slds-p-vertical--medium">

                </div>

            </div> <!-- / primary content wrapper -->
        </div> <!-- / required slds wrapper -->
    </body>
        
	<!-- javascript -->
    <script>
        function createAccount() {
			var accountName = document.getElementById("accountName").value;
            var account = new SObjectModel.Account();
            account.create({Name: accountName},
                           function(error, records) {
                               if (error) {
                                   alert(error.message);
								} else {
                                    updateOutputDiv();
								}
							});
            return false;
		}
        
        function updateOutputDiv() {
            var account = new SObjectModel.Account();
            var outputDiv = document.getElementById("accountList");
            account.retrieve(
                {orderby: [{LastModifiedDate: 'DESC'}], limit: 10},
                function(error, records) {
                    if (error) {
                        alert(error.message);
                    } else {
                        var accountIcon = '<span class="slds-icon__container slds-icon-standard-account">';
                        accountIcon += '<svg aria-hidden="true" class="slds-icon">';
                        accountIcon += '<use xlink:href="{!URLFOR($Resource.SLDS0110, 'assets/icons/standard-sprite/svg/symbols.svg#account')}"></use>';
                        accountIcon += '</svg><span class="slds-assistive-text">Account</span></span>';
                        
                        var html = '<div class="slds-scrollable--x"><table class="slds-table slds-table--bordered">';
						html += '<thead><tr><th scope="col">type</th>';
                        html += '<th scope="col">account name</th>';
                        html += '<th scope="col">account id</th></tr></thead><tbody>';
                        
                        records.forEach(function(record) {
                            html += '<tr><td>' + accountIcon + '</td>';
                            html += '<td>' + record.get("Name") + '</td>';
                            html += '<td>' + record.get("Id") + '</td></tr>';
                        });
                        html = html + '</tbody></table></div>';
                        outputDiv.innerHTML = html;
                    }
                }
            );
        }
        updateOutputDiv();
	</script>
	</html>
</apex:page>